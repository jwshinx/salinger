= form_for @task, :html => {:id => 'new_task_form'} do |f|
 - if @task.errors.any?
  = render :partial => 'shared/error_explanation', :object => @task, :as => :object

 .field
  = f.label :title
  = f.text_field :title, :id => 'title', :size => 50, :maxlength => 50
 .field
  = f.label :description
  = f.text_area :description, :id => 'description', :cols => 40, :rows => 5
 .field
  = f.label :assigned_to
  - if is_admin_joel?( current_user )
   = f.select :assigned_to, User.order('username asc').all.collect {|u| [u.username, u.id]}, {:include_blank => true}, :id => 'assigned_to'
  - else
   = f.select :assigned_to, User.managers.order('username asc').all.collect {|u| [u.username, u.id]}, {:include_blank => true}, :id => 'assigned_to'
 - if params[:action] == 'edit'
  .field
   = f.label :task_status_id
   = f.select :task_status_id, TaskStatusType.order('name asc').all.collect {|s| [s.name, s.id]} 
  .field
   = f.label :completed_on
   = f.text_field :completed_on, :id => 'completed_on_datepicker'
  .field
   = f.label :completed_by
   - if is_admin_joel?( current_user )
    = f.select :completed_by, User.order('username asc').all.collect {|u| [u.username, u.id]}, {:include_blank => true}, :id => 'completed_by'
   - else
    = f.select :completed_by, User.managers.order('username asc').all.collect {|u| [u.username, u.id]}, {:include_blank => true}, :id => 'completed_by'
 .field
  = f.label :due_date
  - # = f.date_select :due_date, :id => 'due_date'
  = f.text_field :due_date, :id => 'due_date_datepicker'
 %br
 %br
 %br
 %br
 .actions
  = f.submit 'Save', :id => 'task_form_button'
